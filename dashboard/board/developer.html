<!DOCTYPE html>
<html>
    <head>
        <style>
            body{
                background-color: #f2f2f2;
            }
        </style>
        <link rel="stylesheet" href="//st.838483.xyz/stcdn/font-awesome/css/all.min.css">
        <link rel="stylesheet" href="../../css/uni.css">
        <script src="../../js/st cookie.js"></script>
        <script src="../../js/jquery-3.7.1.min.js"></script>
        <script src="../../js/packPOST.js"></script>
        <script>
            function onLoad(){
                if(getCookie("dashboard_insideToken") == ""){
                    location.href = "insideTokenGet.html"
                }
                var username = getCookie("dashboard_username");
                document.getElementById("username").innerHTML = username;
                getAuthIDCount();
            }
            async function getAuthIDCount(){
                const pack = {
                    token: getCookie("dashboard_insideToken")
                }
                const response = await packPOST("https://accountsv.838483.xyz/api/listAuthID", pack);
                if(response.success){
                    document.getElementById("authidCount").innerHTML = response.count;
                    for(let i = 1; i <= response.count; i++){
                        // const id = document.createElement("td");
                        // const key = document.createElement("td");
                        // id.innerHTML = response[i + "id"];  // 修复此处：访问对象的 id 属性
                        // key.innerHTML = response[i + "key"];  // 修复此处：访问对象的 key 属性
                        // document.getElementById("authidSelectID").appendChild(id);  // 使用 appendChild 方法添加元素
                        // document.getElementById("authidSelectKey").appendChild(key);  // 使用 appendChild 方法添加元素
                        document.getElementById("authSelect").innerHTML += "<tr><td class='authidSelectID'>" + response[i + "id"] + "</td><td class='authidSelectKey'>" + response[i + "key"] + "</td></tr>";  // 使用 innerHTML 字符串拼接添加元素
                    }
                }else{
                    alert("Failed to get AuthID count.");
                }
            }
        </script>
        <style>
            .authidSelectID{
                border-radius: 3px;
                background-color: cadetblue;
            }
            .authidSelectKey{
                border-radius: 3px;
                background-color: chocolate;
            }
        </style>
    </head>
    <body onload="onLoad()">
        <h1>Developer Dashboard</h1>
        <hr style="width: 100%;">
        <h3>username:&nbsp<span id="username"></h3>
        <hr style="width: 100%;">
        <h2>AuthID</h2>
        <h3>count: <span id="authidCount"></span></h3>
        <table id="authSelect">
            <!-- <tr>
                <td class="authidSelectID">
                </td>
                <td class="authidSelectKey">
                </td>
            </tr> -->
        </table>
    </body>
</html>
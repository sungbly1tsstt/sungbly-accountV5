<!DOCTYPE html>
<head>
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>Login - sungbly accountV5</title>
    <link rel="stylesheet" type="text/css" href="css/uni.css">
    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/UI.js"></script>
    <script src="js/login.js"></script>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit"></script>
    <script>
        console.log('btoa("https://838483.xyz?")',btoa("https://838483.xyz?"))
        getInfo();
        var authID;
        var callback;
        var cftsToken;
        function getInfo(){
            var info = getLoginInfo();
            console.log('info',info)
            for(var i = 0;i<info.length;i++){
                if(info[i].substring(0,6)=='authID'){
                    authID = info[i].split('=')[1];
                    console.log('authID',authID)
                }
                if(info[i].substring(0,8)=='callback'){
                    callback = info[i].split('=')[1];
                    console.log('callback',callback)
                }
            }
        }
        // if using synchronous loading, will be called once the DOM is ready
        turnstile.ready(function () {
        turnstile.render("#cf-turnstile", {
            sitekey: "0x4AAAAAABDhxO6vEa9QWNzO",
            callback: function (token) {
                console.log(`Challenge Success ${token}`);
                cftsToken = token;
            },
            theme: "light"
        });
        });
    </script>
</head>
<body>
    <div class="top-bar">
        <h1 class="top-bar-title">sungbly accountV5</h1>
    </div>
    <div class="main">
        <h1 class="title">Login - sungbly accountV5</h1>
        <hr>
        <div class="input" style="position: absolute;top:20vh;left:10vh" onclick="focusMove(document.getElementById('username'))">
            <p class="input-title" style="position:relative;top:-20%">username:</p>
            <input class="input-input" id="username" style="position:relative;top:-20%"></input>
        </div>
        <div class="input" style="position: absolute;top:35vh;left:10vh" onclick="focusMove(document.getElementById('password'))">
            <p class="input-title" style="position:relative;top:-20%">password:</p>
            <input class="input-input" id="password" type="password" style="position:relative;top:-20%"></input>
        </div>
        <div class="button" style="position:absolute;top:85%;left:43%" onclick="login(document.getElementById('username').value,document.getElementById('password').value,authID,callback,cftsToken)"><p style="position:relative;top:-35%">Login</p></div>
        <div
                class="cf-turnstile"
                id="cf-turnstile"
                data-sitekey="0x4AAAAAABDhxO6vEa9QWNzO"
                data-callback="javascriptCallback"
                style="position: absolute;top: 68%;left: 30%;"
        ></div> 
        <a onclick="location.href='register.html?callback='+btoa(location.href)" style="position: absolute;top:94%;left:2%;color:blue;text-decoration: underline;">Register</a>
    </div>
</body>